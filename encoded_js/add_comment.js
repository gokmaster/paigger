function showCommentOptions(t){$(t).parent().find(".cmtMenu").show()}function showCmtReplyOptions(t){$(t).parent().find(".cmtReplyMenu").show()}function showDeleteComment(t){var e=$(t).parent().parent().find(".cmt_id");active_comment=e.val();$(".deleteCommentDiv").html("\t\t\t\t<div class='dialogBoxHeading' >Delete Comment</div>\t\t\t\t<p>Are you sure you want to delete this comment?</p><br>\t\t\t\t<span style='float:right;' >\t\t\t\t\t <button class='btnDeleteComment' onclick='deleteComment()' >Delete</button>\t\t\t\t\t <button class='greybutton' onclick=closeThis($('.dialogBoxHeading')) >Cancel</button>\t\t\t\t</span>"),$(".deleteCommentDiv").show(),$(".hiddenDropMenu").hide()}function showDeleteCmtReply(t){var e=$(t).parent().parent().find(".hidden_reply_id");active_cmtReply=e.val();$(".deleteCommentDiv").html("\t\t\t\t<div class='dialogBoxHeading' >Delete Reply</div>\t\t\t\t<p>Are you sure you want to delete this reply?</p><br>\t\t\t\t<span style='float:right;' >\t\t\t\t\t <button class='btnDeleteComment' onclick='deleteCmtReply()' >Delete</button>\t\t\t\t\t <button class='greybutton' onclick=closeThis($('.dialogBoxHeading')) >Cancel</button>\t\t\t\t</span>"),$(".deleteCommentDiv").show(),$(".hiddenDropMenu").hide()}function deleteComment(){$(".deleteCommentDiv").html("<div class=loadingDiv ></div> Deleting comment. Please wait..."),$.post("function/deleteComment.php",{comment_id:active_comment},function(t){$(".deleteCommentDiv").html(t),$("#comment_div_"+active_comment).remove(),$(".deleteCommentDiv").hide()})}function deleteCmtReply(){$(".deleteCommentDiv").html("<div class=loadingDiv ></div> Deleting reply. Please wait..."),$.post("function/deleteCmtReply.php",{cmtReply_id:active_cmtReply},function(t){$(".deleteCommentDiv").html(t),$("#reply_div_"+active_cmtReply).remove(),$(".deleteCommentDiv").hide()})}function edit_comment(t){var e=$(t).parent().parent().find(".cmt_id");active_comment=e.val();$.post("function/loadComment_forEditing.php",{comment_id:active_comment},function(t){$("#textarea").html(t),$("#commentButtonsDiv").html("<button id=btnSaveEditCmt >Save Edits</button> <button id=btnCancelEditCmt class=greybutton >Cancel</button>"),$(".controlsBox").hide(),document.getElementById("scroll_to_textarea").scrollIntoView()}),$(".hiddenDropMenu").hide()}function editCmtReply(t){$(".reply_content").attr("contenteditable",!1),$("#btnSaveEditReply").remove(),$("#btnCancelEditReply").remove();var e=$(t).parent().parent().find(".reply_text_div"),n=$(e).find(".reply_content");$(n).attr("contenteditable",!0),$(n).css({"border-color":"#C1E0FF","border-width":"1px","border-style":"solid"}),active_cmtReply_text=$(n).text(),$(n).focus();$(e).append("<button id=btnSaveEditReply >Save Edits</button> <button id=btnCancelEditReply class=greybutton >Cancel</button>"),$(".hiddenDropMenu").hide()}function remove_empty_para(){$.ajaxSetup({async:!1}),$("p > br").remove(),$("#textarea p").filter(function(){return""===$.trim($(this).text())&&0==$(this).children().length}).remove(),$("#textarea p:empty").remove(),$.ajaxSetup({async:!0})}var active_comment,active_cmtReply,active_cmtReply_text;$("#textarea").click(function(t){$("#btnComment").prop("disabled",!1)}),$("#btnComment").click(function(t){$(this).prop("disabled",!0),remove_nbsp_from_p(),remove_empty_para();var e=$("#textarea").html(),n=$.trim($("div[contenteditable]").text()).length,o=$("#hidden_pageid").val();null!=e&&""!=e&&n>0?($(this).prepend("<div class=loadingDiv ></div>"),$.post("function/addComment.php",{comment:e,page_id:o},function(t){$("#textarea").empty(),$("#commentSection").load(document.URL+" #commentSection>*",""),$(".loadingDiv").remove(),$("#textarea").html(t)})):alert("Please type your comment before clicking 'Comment' button."),$(this).prop("disabled",!1)}),$(document).on("click","#btnSaveEditReply",function(){var t=$(this).parent().parent().find(".hidden_reply_id").val(),e=$(this).parent().find(".reply_content"),n=$(e).text(),o=$.trim(n).length;null!=n&&""!=n&&o>0?($(e).prepend("<div class=loadingDiv ></div>"),$.post("function/cmtReply_update.php",{reply_id:t,reply:n},function(t){$(e).attr("contenteditable",!1),$(e).css({"border-width":"0px"}),$("#btnSaveEditReply").remove(),$("#btnCancelEditReply").remove(),$(".loadingDiv").remove()})):alert("You haven't typed in any reply. Please, type in a reply.")}),$(document).on("click","#btnSaveEditCmt",function(){$(this).prop("disabled",!0),remove_nbsp_from_p(),remove_empty_para();var t=$("#textarea").html(),e=$.trim($("div[contenteditable]").text()).length;null!=t&&""!=t&&e>0?($(this).prepend("<div class=loadingDiv ></div>"),$.post("function/comment_update.php",{comment_id:active_comment,comment:t},function(e){$("#textarea").empty(),$(".loadingDiv").remove(),$("#cmt_content_"+active_comment).html(t),document.getElementById("comment_div_"+active_comment).scrollIntoView(),fading_background($("#cmt_content_"+active_comment)),$("#textarea").html(e),$("#commentButtonsDiv").html("<button id='btnComment' >Comment</button>")})):alert("You haven't typed in any comment. Please, type in a comment."),$(this).prop("disabled",!1)}),$(document).on("click","#btnCancelEditCmt",function(){$("#textarea").empty(),$("#commentButtonsDiv").html("<button id='btnComment' >Comment</button>")}),$(document).on("click","#btnCancelEditReply",function(){var t=$(this).parent().find(".reply_content");$(t).attr("contenteditable",!1),$(t).css({"border-width":"0px"}),$("#btnSaveEditReply").remove(),$("#btnCancelEditReply").remove(),$(t).html(active_cmtReply_text)}),$(document).on("click",".showReplyControls",function(){$(".cmtReplyControlsDiv").hide(),$(this).parent().find(".cmtReplyControlsDiv").show()}),$(document).on("click",".btnCancelReply",function(){$(this).parent().find(".txtCmtReply").val(""),$(this).parent().hide()}),$(document).on("click",".btnReply",function(){var t=$(this).parent().find(".txtCmtReply").val(),e=$(this).parent().find(".cmt_id").val(),n=$(this).parent().parent().attr("id");null!=t&&""!=t?($(this).prepend("<div class=loadingDiv ></div>"),$.post("function/addCmtReply.php",{reply:t,comment_id:e},function(t){$(".txtCmtReply").empty(),$("#"+n).load(document.URL+"  #"+n+">*",""),$(".loadingDiv").remove(),$("#textarea").html(t),$(".cmtReplyControlsDiv").hide()})):alert("Please enter your reply before clicking 'Reply' button.")});